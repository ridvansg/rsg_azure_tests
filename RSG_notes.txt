az group create -l eastus -n rgDataMigration

az deployment group create --resource-group rgDataMigration --template-uri https://raw.githubusercontent.com/ridvansg/rsg_azure_tests/main/event-grid-rsg/RsgEventHubsDataMigration.json --parameters eventHubNamespaceName=rsgeventhubnamespace eventHubName=hubdatamigration sqlServerName=rsgsqlservername sqlServerUserName=rsgusername sqlServerPassword=Incektiplaktor4539 sqlServerDatabaseName=rsgdatabasename storageName=rsguniquestoragename functionAppName=rsgappname
-------------------------
az deployment group create --resource-group rgDataMigration --template-uri https://raw.githubusercontent.com/ridvansg/rsg_azure_tests/main/event-grid-rsg/RsgEventHubsDataMigration.json --parameters eventHubNamespaceName=rsgeventhubnamespace eventHubName=hubdatamigration sqlServerName=rsgsqlservername sqlServerUserName=rsgusername sqlServerPassword=Incektiplaktor4539 sqlServerDatabaseName=rsgdatabasename storageName=rsguniquestoragename functionAppName=rsgappname
{"status":"Failed","error":{"code":"DeploymentFailed","target":"/subscriptions/cafb95de-39ce-4f0d-a9fe-db89b93c7ea2/resourceGroups/rgDataMigration/providers/Microsoft.Resources/deployments/RsgEventHubsDataMigration","message":"At least one resource deployment operation failed. Please list deployment operations for details. Please see https://aka.ms/arm-deployment-operations for usage details.","details":[{"code":"MessagingGatewayBadRequest","message":"SubCode=40000. Generic: Linked access check failed for capture storage destination /subscriptions/cafb95de-39ce-4f0d-a9fe-db89b93c7ea2/resourceGroups/rgDataMigration/providers/Microsoft.Storage/storageAccounts/rsguniquestoragename. User or the application with object id c1d5bfd7-b4fa-48c7-ae62-6984d0bfb4e3 making the request doesn't have the required data plane write permissions. Please enable Microsoft.Storage/storageAccounts/blobServices/containers/write, Microsoft.Storage/storageAccounts/blobServices/containers/blobs/write permission(s) on above resource for the user or the application and retry. TrackingId:bcb31c66-ce7e-4131-a563-7167dff05d99_G38, SystemTracker:rsgeventhubnamespace.servicebus.windows.net:hubdatamigration, Timestamp:2023-12-17T16:48:03"}]}}
----------------------------


az deployment group create --resource-group rgDataMigration --template-uri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/event-grid/EventHubsDataMigration.json --parameters eventHubNamespaceName=rsgeventhubnamespace eventHubName=hubdatamigration sqlServerName=rsgsqlservername sqlServerUserName=rsgusername sqlServerPassword=Incektiplaktor4539 sqlServerDatabaseName=rsgdatabasename storageName=rsguniquestoragename functionAppName=rsgappname

{"status":"Failed","error":
{"code":"DeploymentFailed",
 "target":"/subscriptions/cafb95de-39ce-4f0d-a9fe-db89b93c7ea2/resourceGroups/rgDataMigration/providers/Microsoft.Resources/deployments/EventHubsDataMigration",
 "message":"At least one resource deployment operation failed. Please list deployment operations for details. Please see https://aka.ms/arm-deployment-operations for usage details.",
 "details":[
 {
	"code":"MessagingGatewayBadRequest",
	"message":"SubCode=40000. Generic: Linked access check failed for capture 
		storage destination /subscriptions/cafb95de-39ce-4f0d-a9fe-db89b93c7ea2/resourceGroups/rgDataMigration/providers/Microsoft.Storage/storageAccounts/rsguniquestoragename. 
		User or the application with object id c1d5bfd7-b4fa-48c7-ae62-6984d0bfb4e3 making the request doesn't have the required data plane write permissions. 
		   Please enable Microsoft.Storage/storageAccounts/blobServices/containers/write, Microsoft.Storage/storageAccounts/blobServices/containers/blobs/write permission(s) on above resource for the user or the application and retry. 
		
		TrackingId:a17067bc-7660-44b4-a2fe-420e9262d61c_G15, SystemTracker:rsgeventhubnamespace.servicebus.windows.net:hubdatamigration, Timestamp:2023-12-17T09:11:57"}]}}


enable read and write permissions of User ridvansg to storage storageName ("rsguniquestoragename")